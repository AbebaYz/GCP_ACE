### Global/Region/Zone
- access範囲を表す
- Global
  - VMイメージ
  - VPC
  - インスタンステンプレート
- Region
  - サブネット
  - リージョン永続ディスク
  - リージョンMIG
- Zone
  - VM
  - 永続ディスク
  - マシンタイプ
  - ゾーンMIG


### IaaS/PaaS/SaaS
- IaaS (Infrastructure as a Service)
- PaaS (Platform as a Service)
- SaaS (Service as a Service)

- 責任範囲が違う
  - IaaS : 物理ネットワークまでをクラウドが、OS以上をユーザが管理
  - PaaS : ランタイムまでをクラウドが、アプリケーション以上をユーザが管理
  - SaaS : アプリケーションまでをクラウドが、データ以上をユーザが管理


### 可用性とSLA
- SLA (約束、どの程度の品質までのそのプロダクトが保証するか)、Service Level Agreement
  - 数値目標は厳密にはSLO


### NoSQLとRDB
- RDB
  - リレーションを持つ
  - トランザクションをサポート
  - スケーリングは垂直 (Scaling out)
    - インスタンスの性能を上げる
  - 水平スケールすると性能が低下 (Scaling Up)
    - インスタンスの数を増やす
  - GCP
    - CloudSQL
    - Spanner

- NoSQL (Not Only SQL)
  - スキーマ定義が必要
  - リレーションをもたない
  - 結果整合性を許容
  - 水平スケールしやすい
  - GCP
    - Firestore (ドキュメント型)
    - MongoDB (ドキュメント型)
    - Bigtable (カラム指向型)

- Spanner
  - 両方のいいとこ取り
  - RDBだが水平スケールしやすい


### 強整合性と結果整合性
- 強整合性
  - データ書き込み→読み取りをする際に、最新のデータを取得できる
  - データ取得に遅延が発生する
- 結果整合性
  - 古いデータを取得する可能性がある
  - データ取得時の遅延が起きづらい


### SRE
- Site Relibaility Engineering
  - 信頼性のあるサイトの運用方法を体系化したエンジニアリング工学
- スケーラブルで信頼性の高いシステムを運用していくにはどうしたらいいか？
  - 運用チームの手作業を自動化する
  - 巨大なシステムを運用していくにはまずモニターが必要


### ステートレスとステートフル
- ステートレス
  - 状態を保持しない
- ステートフル
  - 状態を保持する
- FW
  - ステートフルの場合、通信の復路を自動で許可するか(ステートフル)
- app
  - ステートレスの場合、アプリケーションに状態を維持しなくてよいのでトラフィックのバランシングが可能 (SQLやMemcacheに一次保存)
  - ステートフルの場合、セッションの情報を維持するには工夫が必要(cookieの使用、LoadBalancingのIPによる振り分け)


### カナリアデプロイ、ブルーグリーンデプロイ、ローリングデプロイ
- ダウンタイムのないデプロイ
- カナリアデプロイ
  - トラフィックを複数のバージョンで分割する
  - 3割だけ新バージョンにトラフィックを流す
- ブルーグリーンデプロイ
  - 新バージョン配置後に全トラフィックを変更する
- ローリングデプロイ
  - それぞれのインスタンスを順番に更新する


### マイクロサービス
- アプリケーションのサービスの大きさ
- 対義語：モノリシック(一枚岩)
  - 一つのサーバで全て作成
- マイクロサービス
  - 小単位でそれぞれのサービス間の連携を図る
- メリット
  - スケーリングや再デプロイによる可用性の向上
  - ダウンタイムなしのアプリケーション更新
  - 開発スピードの加速
  - 技術成約の回避
  - サービスの再利用
- デメリット
  - 管理の複雑さ
  - インターフェースの増加による通信の複雑性増加


### コンテナ

- gest OS を使用しないため軽量な実行が可能になる
  - 物理マシンのリソースを効率利用可能
  - 複数インスタンスを動かせる
  - 移動しやすい
  - インスタンスをすけーるしやすい
  - 冗長化することで可用性を高める事ができる
  - クラウドと相性がいい
- 使用方法
  1. Dockerfile の作成
  2. Docker イメージのビルド
  3. コンテナの起動
     | 項目 | Dockerfile | Docker イメージ | コンテナ |
     |----------------|------------------------------------|------------------------------------------|----------------------------------------------|
     | 種類 | テキストファイル（設定ファイル） | バイナリ（読み取り専用テンプレート） | 実行中のプロセス（読み書き可能な実体） |
     | 主な役割 | イメージを作成するための設計図 | コンテナを作るためのテンプレート | 実際に動作するアプリケーションの実体 |
     | 作成コマンド | 自分で作成 | `docker build` で作成 | `docker run` で作成 |
     | 格納場所 | 任意のディレクトリ（例: プロジェクト内） | Docker の内部ストレージ（例: `/var/lib/docker/`） | メモリ上のプロセス + マウントされたファイルシステム |
     | 状態 | 静的 | 静的 | 動的（起動・停止可能） |
     | 書き換え可能性 | 手動編集可 | 基本的に不可（再ビルドが必要） | 一時的な変更可（永続化するにはボリューム等が必要） |
-
